{% extends "core/base.html" %}
{% block title %}Set New Password | DetectiFy{% endblock %}

{% block content %}
<div class="neo-card max-w-md mx-auto mt-20 p-8 text-center">
  <h2 class="text-3xl font-bold mb-6 flex items-center justify-center gap-2">
    <span class="material-icons text-[var(--btn-bg)] text-5xl">lock_open</span>
    Set New Password
  </h2>

  {% if validlink %}
  <form method="POST" class="space-y-5 text-left">
    {% csrf_token %}
    {{ form.non_field_errors }}
    
    <div class="flex flex-col">
      <label for="id_new_password1" class="font-semibold mb-1 text-[var(--text-color)]">New Password</label>
      {{ form.new_password1 }}
    </div>

    <div class="flex flex-col">
      <label for="id_new_password2" class="font-semibold mb-1 text-[var(--text-color)]">Confirm New Password</label>
      {{ form.new_password2 }}
    </div>

    <button type="submit" class="neo-btn neo-btn-primary w-full py-2 font-bold text-lg">
      Reset Password
    </button>
  </form>
  {% else %}
  <p class="text-sm opacity-80 mt-4">
    This password reset link is invalid or has expired. Please request a new one.
  </p>
  <a href="{% url 'password_reset' %}" class="neo-btn neo-btn-primary w-full mt-6">Request New Link</a>
  {% endif %}
</div>

<style>
input {
  background: var(--card-bg);
  border: 3px solid var(--border-color);
  border-radius: 0.75rem;
  padding: 0.75rem 1rem;
  color: var(--text-color);
  font-weight: 500;
  transition: all 0.25s ease;
}
input:focus {
  outline: none;
  border-color: var(--btn-bg);
  box-shadow: 4px 4px 0 var(--border-color);
  transform: translate(-2px, -2px);
}
</style>
{% endblock %}