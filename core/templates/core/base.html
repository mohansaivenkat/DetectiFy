{% load static %}
<!DOCTYPE html>
<html lang="en" class="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{% block title %}Counterfeit Detection System{% endblock %}</title>

    <!-- Google Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght@400;700&display=swap" />
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style type="text/tailwindcss">
      @custom-variant dark (&:where(.dark, .dark *));
    </style>

    <style>
      :root {
        --bg-color: #f9fafb;
        --text-color: #18181b;
        --card-bg: #ffffff;
        --border-color: #d4d4d8;
        --btn-bg: #2563eb;
        {% comment %} --btn-bg: #60a5fa; {% endcomment %}
        --btn-text: #ffffff;
      }

      .dark {
        --bg-color: #0f0f10;
        --text-color: #e4e4e7;
        --card-bg: #1a1a1d;
        --border-color: #3f3f46;
        {% comment %} --btn-bg: #2563eb; {% endcomment %}
        --btn-bg: #2d83ecff;
        --btn-text: #ffffff;
      }

      body {
        font-family: 'Space Grotesk', sans-serif;
        background: var(--bg-color);
        color: var(--text-color);
        min-height: 100vh;
        transition: background 0.3s ease, color 0.3s ease;
      }

      .neo-btn {
        background: var(--card-bg);
        border: 3px solid var(--border-color);
        color: var(--text-color);
        font-weight: 700;
        padding: 0.5rem 1.25rem;
        cursor: pointer;
        transition: all 0.2s ease;
        box-shadow: 4px 4px 0 var(--border-color);
        text-decoration: none;
        display: inline-block;
      }

      .neo-btn:hover {
        transform: translate(-2px, -2px);
        box-shadow: 6px 6px 0 var(--border-color);
      }

      .neo-btn-primary {
        background: var(--btn-bg);
        color: var(--btn-text);
        border-color: #60a5fa;
      }

      .neo-card {
        background: var(--card-bg);
        border: 3px solid var(--border-color);
        box-shadow: 8px 8px 0 rgba(63, 63, 70, 0.3);
        border-radius: 0.75rem;
        padding: 2rem;
        transition: all 0.25s ease;
      }
      .neo-card:hover {
        transform: translate(-2px, -2px);
        box-shadow: 6px 6px 0 var(--border-color);
      }


      nav, footer {
        background: var(--card-bg);
        border-color: var(--border-color);
        color: var(--text-color);
      }

      .theme-toggle {
        display: flex;
        align-items: center;
        justify-content: center;
        border: none;
        background: transparent;
        color: var(--text-color);
        cursor: pointer;
        transition: transform 0.2s ease;
      }

      .theme-toggle:hover {
        transform: scale(1.1);
      }

      .alert {
        border: 3px solid;
        border-radius: 0.5rem;
        padding: 1rem 1.5rem;
        margin-bottom: 1.5rem;
        font-weight: 600;
        box-shadow: 4px 4px 0 currentColor;
      }

      .alert-success { background: rgba(34,197,94,0.15); border-color: #22c55e; color: #16a34a; }
      .alert-error { background: rgba(239,68,68,0.15); border-color: #ef4444; color: #b91c1c; }
      .alert-warning { background: rgba(234,179,8,0.15); border-color: #eab308; color: #ca8a04; }       
    </style>

    {% block extra_css %}{% endblock %}
  </head>

  <body class="min-h-screen flex flex-col">
    <!-- Navbar -->
    <nav class="p-4 border-b-4 flex items-center justify-between relative">
      <!-- Left: Logo -->
      <div>
        <a href="{% url 'home' %}" style="color: var(--btn-bg)">
          <h1 class="tracking-tight text-4xl font-bold">DetectiFy</h1>
        </a>
      </div>

      <div class="flex items-center gap-4">
        <button id="theme-toggle" class="theme-toggle">
          <span class="material-icons" id="theme-icon">light_mode</span>
        </button>

        <!-- Right: Buttons (Theme toggle + Mobile menu toggle) -->
        <div class="flex items-center gap-3">
          <!-- Theme Toggle -->

          <!-- Hamburger Icon (Mobile) -->
          <button id="menu-toggle" class="md:hidden p-1 bg-[var(--card-bg)]">
            <span class="material-icons text-3xl">menu</span>
          </button>
        </div>

        <!-- Nav Links -->
        <div
          id="nav-links"
          class="hidden md:flex flex-col md:flex-row md:items-center md:gap-3 absolute md:static top-full left-0 w-full md:w-auto bg-[var(--card-bg)] md:bg-transparent border-t md:border-0 p-4 md:p-0 shadow md:shadow-none z-10"
        >
          <a
            href="{% url 'home' %}"
            class="neo-btn text-sm w-full md:w-auto mb-2 md:mb-0"
            >Home</a
          >

          <a
            href="{% url 'about' %}"
            class="neo-btn text-sm w-full md:w-auto mb-2 md:mb-0"
            >About</a
          >
          <a
            href="{% url 'contact' %}"
            class="neo-btn text-sm w-full md:w-auto mb-2 md:mb-0"
            >Contact</a
          >

          {% if user.is_authenticated %}
          <span class="text-sm font-semibold opacity-80"
            >{{ user.username }}</span
          >
          <a
            href="{% url 'report' %}"
            class="neo-btn neo-btn-primary text-sm w-full md:w-auto mb-2 md:mb-0"
            >Report</a
          >
          <form method="POST" action="{% url 'logout' %}" class="inline">
            {% csrf_token %}
            <button type="submit" class="neo-btn neo-btn-secondary">
              <span class="material-icons align-middle">logout</span> Logout
            </button>
          </form>
          {% else %}
          <a
            href="{% url 'login' %}"
            class="neo-btn neo-btn-primary text-sm w-full md:w-auto mb-2 md:mb-0"
            >Login</a
          >
          <a
            href="{% url 'register' %}"
            class="neo-btn text-white bg-red-500 text-sm w-full md:w-auto"
            >Register</a
          >
          {% endif %}
        </div>
      </div>
    </nav>

    <!-- Messages -->
    {% if messages %}
    <div class="container mx-auto px-6 pt-4">
      {% for message in messages %}
      <div class="alert alert-{{ message.tags }}">{{ message }}</div>
      {% endfor %}
    </div>
    {% endif %}

    <main class="flex-1 container mx-auto px-6 py-8">
      {% block content %}{% endblock %}
    </main>

    <footer class="text-center p-4 border-t-4 font-semibold opacity-80">
      © 2025 <span class="font-bold">DetectiFy</span> — Securing Authenticity,
      One Check at a Time.
    </footer>

    {% block extra_js %}
    <script>
      // Theme Toggle
      const htmlEl = document.documentElement;
      const toggleBtn = document.getElementById("theme-toggle");
      const icon = document.getElementById("theme-icon");
      if (localStorage.getItem("theme") === "light") {
        htmlEl.classList.remove("dark");
        icon.textContent = "dark_mode";
      }
      toggleBtn.addEventListener("click", () => {
        htmlEl.classList.toggle("dark");
        const isDark = htmlEl.classList.contains("dark");
        icon.textContent = isDark ? "light_mode" : "dark_mode";
        localStorage.setItem("theme", isDark ? "dark" : "light");
      });

      // Mobile Menu Toggle
      const menuBtn = document.getElementById("menu-toggle");
      const navLinks = document.getElementById("nav-links");
      menuBtn.addEventListener("click", () => {
        navLinks.classList.toggle("hidden");
      });
    </script>
    {% endblock %}
  </body>
</html>
